<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OZORA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</head>
<body>
   <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <%if(message===0){%>
        <script>
          Swal.fire({
  icon: "error",
  title: "Oops...",
  text: "Something went wrong!",
  footer: '<a href="#">Why do I have this issue?</a>'
})
        </script>
      <%}%> -->
    <section class=" bg-black" style="height: 127vh;">
        <div class="container py-5 h-90">
          <h3 class="text-center text-white">REGISTER HERE</h3><br>
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col">
              <div class="card card-registration " style="height: 105vh;">
                <div class="row g-0">
                  <div class="col-xl-6 d-none d-xl-block ">
                    <img src="/assets/imgs/signuppage2.jpg"
                      alt="Sample photo" class="img-fluid"
                      style="border-top-left-radius: .25rem; border-bottom-left-radius: .25rem; height:105vh; width: 90%;" />
                  </div>
                  <div class="col-xl-6">
                    <div class="card-body p-md-5 text-black">
                      <!-- <h3 class="mb-5 text-uppercase">Create New Account</h3> -->
                      
                      <form action="/register" method="post">
                        <div class="text-danger" id="message"></div>
                        <div class="form-outline mb-3">
                            <input type="text" id="name" class="form-control form-control-lg" pattern="^(?!\s*$)[a-zA-Z](?:[-'a-zA-Z]+[a-zA-Z])?$" name="name" onkeyup="validateName()" required/>
                            <label class="form-label" for="form3Example1cg">Your Name</label>
                        </div>
                        


                        <script>
                          function validateName(){
                            var firstNameInput = document.getElementById('name');
            var trimmedFirstName = firstNameInput.value.trim();
            firstNameInput.value = trimmedFirstName;

            if (trimmedFirstName === "") {
                var messageDiv = document.getElementById('message');
                messageDiv.innerHTML = 'Please enter valid names. Spaces only are not allowed.';
            } else {
                var messageDiv = document.getElementById('message');
                messageDiv.innerHTML = '';
            }

                          }
                        </script>
                
                        <%if(locals.message){%>
                          <span class="text-danger"><%=message%></span>
                        <%}%>
                
                        <div class="form-outline mb-3">
                            <input type="email" id="form3Example3cg" class="form-control form-control-lg" name="email" pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$" required />
                            <label class="form-label" for="form3Example3cg">Your Email</label>
                        </div>
                
                        <div class="form-outline mb-3">
                            <input type="number" id="form3Example4cg" class="form-control form-control-lg" name="mobile" required/>
                            <label class="form-label" for="form3Example4cg">Mobile</label>
                        </div>
                
                        <div class="form-outline mb-3">
                            <input type="password" id="password" class="form-control form-control-lg" name="password" oninput="validatePassword()" required />
                            <label class="form-label" for="password">Password</label>
                            <div id="password-strength"></div>
                        </div>
                
                        <div class="form-outline mb-1">
                          <input type="password" id="confirmPassword" class="form-control form-control-lg" name="confirmPassword" oninput="validateMatchingPasswords()" required />
                          <label class="form-label" for="confirmPassword">Confirm Password</label>
                          <div id="password-match"></div>
                          
                          <p class="text-black mt-3 mb-1">
                              Have any referral code?
                              <label class="fw-bold text-body" onclick="toggleReferralCodeInput()">
                                  <u class="text-black">Click here</u>
                              </label>
                          </p>
                      
                          <!-- Referral Code Input Field (Initially Hidden) -->
                          <div id="referralCodeInputContainer" style="display: none;">
                              
                              <input type="text" id="referralCodeInput" class="form-control form-control-lg" name="referralCode" placeholder="Enter Referral Code" onkeyup="checkReferral()" />
                              <span class="text-secondary" id="referralMessage"></span>
                            </div>
                      </div><br>
                      <script>
                        function checkReferral(){
                          var code=document.getElementById('referralCodeInput').value
                          fetch(`/checkReferral?code=${code}`)
                          .then(response=>response.json())
                          .then(data=>{
                            document.getElementById('referralMessage').innerHTML=data.message
                          })
                        }
                      </script>
                      <script>
                          function toggleReferralCodeInput() {
                              const referralCodeInputContainer = document.getElementById('referralCodeInputContainer');
                              referralCodeInputContainer.style.display = referralCodeInputContainer.style.display === 'none' ? 'block' : 'none';
                          }
                      </script>
                      
                        <script>
                            function validatePassword() {
                                const passwordInput = document.getElementById('password');
                                const passwordStrength = document.getElementById('password-strength');
                                
                                // Define the password strength criteria
                                const strongRegex = /^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/;
                
                                // Get the entered password
                                const password = passwordInput.value;
                                
                
                                // Check if the password meets the criteria
                                if (strongRegex.test(password)) {
                                    passwordStrength.innerHTML = '<span style="color: green;">Strong password</span>';
                                } else {
                                    passwordStrength.innerHTML = '<span style="color: red;">Weak password</span>';
                                }
                            }
                
                            function validateMatchingPasswords() {
                                const passwordInput = document.getElementById('password');
                                const confirmPasswordInput = document.getElementById('confirmPassword');
                                const passwordMatch = document.getElementById('password-match');
                
                                const password = passwordInput.value;
                                const confirmPassword = confirmPasswordInput.value;
                
                                if (password === confirmPassword) {
                                    passwordMatch.innerHTML = '<span style="color: green;">Passwords match</span>';
                                } else {
                                    passwordMatch.innerHTML = '<span style="color: red;">Passwords do not match</span>';
                                }
                            }
                        </script>
                
                  
        
                        <!-- <div class="form-check d-flex justify-content-center mb-5">
                          <input class="form-check-input me-2" type="checkbox" value="" id="form2Example3cg" />
                          <label class="form-check-label" for="form2Example3g">
                            I agree all statements in <a href="#!" class="text-body"><u>Terms of service</u></a>
                          </label>
                        </div> -->
                      
                       
                        <div class="d-flex justify-content-center">
                          <button type="submit"
                            class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">Register</button>
                        </div>
                        
                        <p  class=" text-center text-black mt-3 mb-0">Have already an account? <a href="/"
                            class="fw-bold text-body"><u class="text-black">Login here</u></a></p>
        
                      </form>
                      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
                      <!-- <%if(message==='0'){%>
                      <script>
                        document.addEventListener('DOMContentLoaded', function() {
                          Swal.fire({
                              icon: "error",
                              title: "Email Already exists",
                              footer: '<a href="/">Login to existing account</a>'
                            });
                        }); 
                      </script>
                      <%}%> -->
                      
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
     
</body>
</html>